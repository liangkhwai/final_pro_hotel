{% extends 'base.html'%}



{% block title %} Booking {% endblock %}


{% block content %}
<style>
    .modal {
        z-index:1;
        display:none;
        padding-top:10px;
        position:fixed;
        left:0;
        top:0;
        width:100%;
        height:100%;
        overflow:auto;
        background-color:rgb(0,0,0);
        background-color:rgba(0,0,0,0.8)
        }
        .modal-content{
            margin: auto;
            display: block;
            width: 0px;
            position: absolute;
              top: 50%;
              left: 25%;
            transform: translate(-50%, -50%);
            }
            .modal-hover-opacity {
                opacity:1;
                filter:alpha(opacity=100);
                -webkit-backface-visibility:hidden
                }
                
                .modal-hover-opacity:hover {
                opacity:0.60;
                filter:alpha(opacity=60);
                -webkit-backface-visibility:hidden
                }
                .close {
                    text-decoration:none;float:right;font-size:24px;font-weight:bold;color:white
                    }
                    .modal-content, #caption {   
  
                        -webkit-animation-name: zoom;
                        -webkit-animation-duration: 0.6s;
                        animation-name: zoom;
                        animation-duration: 1s;
                    }
                    @-webkit-keyframes zoom {
                        from {-webkit-transform: translateY(20vh)} 
                        to {-webkit-transform:translateY(0vh)}
                    }
                    
                    @keyframes zoom {
                        from {
                            opacity: 0;
                        } 
                        to {
                            opacity: 1;
                        }
                       /* from {
                            transform: translateY(100vh)
                        } 
                        to {
                            transform:translateY(0vh)
                        }*/
                    }.container1 {
                        width:200px;
                        display:inline-block;
                        }
                    

    #top{
        animation: fadeup 1s;
    }
    #bot{
        animation: fadebot 1s;

    }
    @keyframes fadeup{
        from{
            opacity: 0;
            transform: translateY(10vh);
        }
        to{
            opacity: 1;
            transform: translateY(0vh);

        }
    }
    @keyframes fadebot{
        from{
            opacity: 0;
            transform: translateY(-10vh);
        }
        to{
            opacity: 1;
            transform: translateY(0vh);

        }
    }
                                    
</style>
<div class="container">
    <h1 class="py-3 text-uppercase pt-5">{{detail.name}}</h4>
        <div class="row">
            <div class="col-md-6 " id="top">
                <div class="p-5">
                    <img src="/media/{{detail.img}}" alt="" class="rounded modal-hover-opacity" width="100%" height="448px" onclick="onClick(this)">
                </div>
                <div class="row ">
                    
                        {% for i in multiimg%}
                        <div class="col-3 " style="height: 80px;">

                            <img src="/media/{{i.image}}" alt="" class="rounded modal-hover-opacity" width="100%" height="100%" onclick="onClick(this)">

                        </div>
                        {% endfor%}
                    
                </div>
            </div>
            <div class="col-md-6 rounded rounded-4 " style="" id="bot">
                <div class="pb-5"></div>
                <div class="container px-5  rounded rounded-4" style="background-color: white;">
                    <h5 class="text-center py-5 pb-2"><b><i class="fa-regular fa-calendar-days"></i>
                            รายละเอียดการจอง</b>
                    </h5>
                    <b>
                        <hr class="rounded-5 text-dark bg-dark"
                            style=" color:black !important; background-color: black !important; height: 3px;"></b>
                    <form action="" method="post" name="formform" id="formform">
                        {%csrf_token%}
                        <div class="text-center " style="padding-bottom: 31px">
                            <div>ประเภท : {{detail.name}}</div><br>
                            <div>วันที่เข้า : {{date_in}}</div><br>
                            <div>วันที่ออก : {{date_out}}</div><br>
                            <div>คืน : {{days}} คืน</div><br>
                            <div>สำหรับ : ผู้ใหญ่ {{ request.COOKIES.people }} คน, 1 ห้อง</div><br>
                            <div>ราคา : {{price}} บาท</div><br>
                            <input type="radio" name="pay" id="pay1" checked value="later">
                            <label for="pay1">จ่ายทีหลัง</label> &nbsp;&nbsp;&nbsp;&nbsp;
                            <input type="radio" name="pay" id="pay2" value="now">
                            <label for="pay2">จ่ายตอนนี้</label>
                            <br><br>
                            <a href="/" class="btn btn-outline-danger">ยกเลิกการจอง</a>
                            &nbsp;&nbsp;&nbsp;&nbsp;
                            <input type="button" onclick="confirmedit()" name="" id="" class="btn btn-primary-booking "
                                value="ยืนยันการจอง"
                                style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem;">
                            <input type="hidden" value="{{days}}" name="days">
                            <input type="hidden" value="{{price}}" name="sum_price">
                            <input type="hidden" value="{{detail.type_id}}" name="type_id">
                            <input type="hidden" value="{{room_free.room_id}}" name="room_id">


                        </div>
                    </form>
                </div>
            </div>
        </div>
</div>
<div class="pb-5"></div>

<div id="modal01" class="modal" onclick="this.style.display='none'">
    <span class="close">&times;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <div class="modal-content">
      <img id="img01" style="" width="800px">
    </div>
  </div>



{% include 'footer.html'%}
<script>

    function onClick(element) {
        document.getElementById("img01").src = element.src;
        document.getElementById("modal01").style.display = "block";
      }
   



    var form = document.getElementById("formform");

    function handleForm(event) {
        console.log(event)
        event.preventDefault();
    }
    form.addEventListener('submit', handleForm);

    function confirmedit() {
        Swal.fire({
            title: 'ยืนยันการจอง',
            text: "การกระทำต่อไปนี้ ไม่สามารถย้อนคืนได้",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'ยืนยัน',
            cancelButtonText: 'ยกเลิก'
        }).then((result) => {
            if (result.isConfirmed) {
                try {
                    console.log('debgu')
                    document.getElementById("formform").submit();
                } catch (error) {
                    Swal.fire({
                        icon: 'error',
                        text: 'เกิดข้อผิดพลาด',
                    });
                }
            }
        })
    }
</script>
{% endblock %}